🚀 开始执行步骤1-5的测试...
ADMIN_ADDRESS=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
USER1_ADDRESS=0x70997970C51812dc3A010C7d01b50e0d17dc79C8
📦 步骤1: 部署ERC20合约...
ERC20_ADDRESS=0x5FbDB2315678afecb367f032d93F642f64180aa3
💰 检查ADMIN的ERC20余额...
ADMIN ERC20余额: 1000000000000000000000
💰 给USER1转账100个token...

blockHash            0xbfa4475fb9119504df0053e696052ac2a2b9086ae8421a7939ebbe5392ffb4be
blockNumber          2
contractAddress
cumulativeGasUsed    55601
effectiveGasPrice    882481810
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              55601
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x0000000000000000000000000000000000000000000000056bc75e2d63100000","blockHash":"0xbfa4475fb9119504df0053e696052ac2a2b9086ae8421a7939ebbe5392ffb4be","blockNumber":"0x2","blockTimestamp":"0x688dc38c","transactionHash":"0x5edba49249c3367d2195d2d7146e9343a2bc06d43ff93bff02d7d7e99010ec26","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000840000000000000000100000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000042000000200000000000000000000000002000000000000000000000000000000000000000000000000000000001000000000000000000000000000000
root
status               1 (success)
transactionHash      0x5edba49249c3367d2195d2d7146e9343a2bc06d43ff93bff02d7d7e99010ec26
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x5FbDB2315678afecb367f032d93F642f64180aa3
✅ 检查USER1的ERC20余额:
USER1 ERC20余额: 100000000000000000000 (应该是100000000000000000000)
📦 步骤2: 部署TokenBank合约...
TOKENBANK_ADDRESS=0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
✅ 检查TokenBank合约的TOKEN地址:
TokenBank的TOKEN地址: 0x5FbDB2315678afecb367f032d93F642f64180aa3 (应该是 0x5FbDB2315678afecb367f032d93F642f64180aa3)
📝 步骤3: USER1向ERC20 approve 10个token给TokenBank合约...

blockHash            0xc1dd3d15c727fec954ab2363a40a6338eb34093e1cc366a1138edea1b34f5de1
blockNumber          4
contractAddress
cumulativeGasUsed    48559
effectiveGasPrice    682162859
from                 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
gasUsed              48559
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xc1dd3d15c727fec954ab2363a40a6338eb34093e1cc366a1138edea1b34f5de1","blockNumber":"0x4","blockTimestamp":"0x688dc38c","transactionHash":"0x04bcaefcb629aefc35324ef1a1355f7c47b67c1312c2fc6ccb5026d0bef2b83b","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000400000000000000000000000200000000000000000000000000000000000000000000000000000000000000000400000000840000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000020000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000010000000000000000000000000000001000000000000000000000000000000
root
status               1 (success)
transactionHash      0x04bcaefcb629aefc35324ef1a1355f7c47b67c1312c2fc6ccb5026d0bef2b83b
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x5FbDB2315678afecb367f032d93F642f64180aa3
✅ 检查approve是否成功:
USER1给TokenBank的allowance: 10000000000000000000 (应该是10000000000000000000)
💰 步骤4: USER1调用TokenBank的deposit方法...

blockHash            0x65f78a931841e862a866d70e7476a9ba3013dc4f83a7eb99c384c03983703377
blockNumber          5
contractAddress
cumulativeGasUsed    136711
effectiveGasPrice    597168545
from                 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
gasUsed              136711
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0x65f78a931841e862a866d70e7476a9ba3013dc4f83a7eb99c384c03983703377","blockNumber":"0x5","blockTimestamp":"0x688dc38c","transactionHash":"0xc0372334392baed1e450dbfbe167a5879584e3a31c63e2bf703ca7c9925a6489","transactionIndex":"0x0","logIndex":"0x0","removed":false},{"address":"0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0","topics":["0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0x65f78a931841e862a866d70e7476a9ba3013dc4f83a7eb99c384c03983703377","blockNumber":"0x5","blockTimestamp":"0x688dc38c","transactionHash":"0xc0372334392baed1e450dbfbe167a5879584e3a31c63e2bf703ca7c9925a6489","transactionIndex":"0x0","logIndex":"0x1","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000400000000040200000000000000000000000000000000000000008000000000000000000000000000000008000400000000840000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000001000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000042000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000400000000000000000
root
status               1 (success)
transactionHash      0xc0372334392baed1e450dbfbe167a5879584e3a31c63e2bf703ca7c9925a6489
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
✅ 步骤5: 检查余额...
USER1在ERC20上的余额:
USER1 ERC20余额: 90000000000000000000 (应该是90000000000000000000)
USER1在TokenBank里的余额:
USER1 TokenBank余额: 10000000000000000000 (应该是10000000000000000000)
TokenBank在ERC20里的余额:
TokenBank ERC20余额: 10000000000000000000 (应该是10000000000000000000)
🎯 验证结果:
✅ 所有余额检查通过！
   - USER1在ERC20上有90个token
   - USER1在TokenBank里有10个token
   - TokenBank在ERC20里有10个token
🎉 步骤1-5测试完成！

📋 部署的合约地址:
ERC20_ADDRESS=0x5FbDB2315678afecb367f032d93F642f64180aa3
TOKENBANK_ADDRESS=0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0

👤 用户地址:
ADMIN_ADDRESS=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
USER1_ADDRESS=0x70997970C51812dc3A010C7d01b50e0d17dc79C8
📦 步骤6: 部署Delegator合约...
DELEGATOR_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
