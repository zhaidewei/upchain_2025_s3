🚀 开始初始化 Airdop Merkle NFT Market 测试环境...
📋 账户信息:
  Admin: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266
  User1: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8
  User2: 0x3c44cdddb6a900fa2b585dd299e03d12fa4293bc
🔧 检查anvil是否运行...
✅ Anvil已运行
🔨 编译合约...
No files changed, compilation skipped
✅ 编译成功
📦 部署ERC20合约...
✅ ERC20合约部署到: 0x5FbDB2315678afecb367f032d93F642f64180aa3
📦 部署NFT合约...
✅ NFT合约部署到: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
🏦 部署NFTMarket合约...
✅ NFTMarket合约部署到: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
💰 检查admin的初始余额...
✅ Admin初始余额: 1000000000000000000000 [1e21] (应该是1000000000000000000000)
💸 Admin给User1转账100个token...

blockHash            0x187648a93248adf79d4a78f50eaff74e47dae71c0c6e707f288b9c874ec67c65
blockNumber          4
contractAddress
cumulativeGasUsed    52150
effectiveGasPrice    704653943
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              52150
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x0000000000000000000000000000000000000000000000056bc75e2d63100000","blockHash":"0x187648a93248adf79d4a78f50eaff74e47dae71c0c6e707f288b9c874ec67c65","blockNumber":"0x4","blockTimestamp":"0x688c5d90","transactionHash":"0xb1c8f162cec1d3906c1b7e49a8469f455a3720dd82a5ee0cf7a40cd2c83eb529","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000840000000000000000100000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000042000000200000000000000000000000002000000000000000000000000000000000000000000000000000000001000000000000000000000000000000
root
status               1 (success)
transactionHash      0xb1c8f162cec1d3906c1b7e49a8469f455a3720dd82a5ee0cf7a40cd2c83eb529
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x5FbDB2315678afecb367f032d93F642f64180aa3
✅ User1获得100个token
💸 Admin给User2转账10个token...

blockHash            0xba4fc2c6b6f45ee3d8bc30d70ef47074bab4c64860f3cec5c07d14f47b00c248
blockNumber          5
contractAddress
cumulativeGasUsed    52126
effectiveGasPrice    616878432
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              52126
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xba4fc2c6b6f45ee3d8bc30d70ef47074bab4c64860f3cec5c07d14f47b00c248","blockNumber":"0x5","blockTimestamp":"0x688c5d91","transactionHash":"0x75af7535a10b3450449887035b140a4c5917b4eb00c92b5838fc3e3f648c8771","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000008000000000000000000000000000000000000000000000040000000000000000100000000000800000000000000000010000000000000000000000000000000000000000000000000000000000000000200000000000000000000200000000000000000000000000000000000000000000000000000000042000000200000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
root
status               1 (success)
transactionHash      0x75af7535a10b3450449887035b140a4c5917b4eb00c92b5838fc3e3f648c8771
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x5FbDB2315678afecb367f032d93F642f64180aa3
✅ User2获得10个token
🎁 Admin给User1铸造第一个NFT...

blockHash            0xc4551a28f87a8df81a120cd132b1d21f5b2cf43d8fdc1ad68f4a82f41911ed3f
blockNumber          6
contractAddress
cumulativeGasUsed    96548
effectiveGasPrice    540036590
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              96548
logs                 [{"address":"0xe7f1725e7734ce288f8367e1bb143e90bb3f0512","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x0000000000000000000000000000000000000000000000000000000000000000","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000000000000000000000000000000000000000000000"],"data":"0x","blockHash":"0xc4551a28f87a8df81a120cd132b1d21f5b2cf43d8fdc1ad68f4a82f41911ed3f","blockNumber":"0x6","blockTimestamp":"0x688c5d91","transactionHash":"0xef779d690aec40bad2bc8a19047e3aeba16a662e21cfc6364227573ac53c5c56","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000800020000000000000000000800000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000001000000000000000000000000000000020000000000000000000000000000000000001000000000000800000000000000000
root
status               1 (success)
transactionHash      0xef779d690aec40bad2bc8a19047e3aeba16a662e21cfc6364227573ac53c5c56
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
🎁 Admin给User1铸造第二个NFT...

blockHash            0x01f332ca6cf39c59a35a9484597aa808be3271ed1dd67e0b8d9b09fdb88cbd21
blockNumber          7
contractAddress
cumulativeGasUsed    62348
effectiveGasPrice    472966512
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              62348
logs                 [{"address":"0xe7f1725e7734ce288f8367e1bb143e90bb3f0512","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x0000000000000000000000000000000000000000000000000000000000000000","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000000000000000000000000000000000000000000001"],"data":"0x","blockHash":"0x01f332ca6cf39c59a35a9484597aa808be3271ed1dd67e0b8d9b09fdb88cbd21","blockNumber":"0x7","blockTimestamp":"0x688c5d91","transactionHash":"0x2aa04afff202c3d25cf0d41c9b8207cf108d5156ed498402219a8b1e15e5546c","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000040000000000000000000000000008000000000000000000040000000000000000000000000800020000000000000000000800000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000001000000000000000000000000000000060000000000000000000000000000000000001000000000000800000000000000000
root
status               1 (success)
transactionHash      0x2aa04afff202c3d25cf0d41c9b8207cf108d5156ed498402219a8b1e15e5546c
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
✅ User1获得两个NFT
🔍 验证初始状态...
  Admin在ERC20余额: 890000000000000000000 [8.9e20] (应该是890000000000000000000)
  User1在ERC20余额: 100000000000000000000 [1e20] (应该是 100000000000000000000)
  User2在ERC20余额: 10000000000000000000 [1e19] (应该是 10000000000000000000)
  User1在NFT余额: 2 (应该是 2)
  NFT tokenid 1 的owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (应该是 User1: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8)
  NFT tokenid 2 的owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (应该是 User1: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8)
  User2在NFT余额: 0 (应该是 0)

🎉 初始化完成！

📋 合约地址:
  ERC20: 0x5FbDB2315678afecb367f032d93F642f64180aa3
  NFT: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
  NFTMarket: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0

👥 测试账户:
  Admin: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266
  User1: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8
  User2: 0x3c44cdddb6a900fa2b585dd299e03d12fa4293bc
🔍 测试通过permit购买NFT...
🔐 User1授权NFT给市场合约...

blockHash            0x772b48fb5d2c905a6c6ab6e441b59b6935b7ae48776c92f3ae06dab0203a6be3
blockNumber          8
contractAddress
cumulativeGasUsed    49068
effectiveGasPrice    414091436
from                 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
gasUsed              49068
logs                 [{"address":"0xe7f1725e7734ce288f8367e1bb143e90bb3f0512","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0","0x0000000000000000000000000000000000000000000000000000000000000000"],"data":"0x","blockHash":"0x772b48fb5d2c905a6c6ab6e441b59b6935b7ae48776c92f3ae06dab0203a6be3","blockNumber":"0x8","blockTimestamp":"0x688c5d91","transactionHash":"0xee8c56e3b4b31111e5706eb2f5f5676730267dd78c3100134d02dc5e3bfbabd9","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000010400000000000000000000000200000000000000000000000000000000000000000000000000000000000000000400000000800020000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000020000010000000000000000000000000000001000000000000800000000000000000
root
status               1 (success)
transactionHash      0xee8c56e3b4b31111e5706eb2f5f5676730267dd78c3100134d02dc5e3bfbabd9
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
📝 User1上架NFT...

blockHash            0x5478365285256816a81cbc5627bcf45abddaa7eb6462c04ef49fd34b32074661
blockNumber          9
contractAddress
cumulativeGasUsed    101226
effectiveGasPrice    362499329
from                 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
gasUsed              101226
logs                 [{"address":"0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0","topics":["0x5f9c03de076f5063cd3ebcfe8ef7aa8af378e4b35a83c77ba9777e97083879a2","0x0000000000000000000000000000000000000000000000000000000000000000","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x000000000000000000000000000000000000000000000001158e460913d00000","blockHash":"0x5478365285256816a81cbc5627bcf45abddaa7eb6462c04ef49fd34b32074661","blockNumber":"0x9","blockTimestamp":"0x688c5d91","transactionHash":"0x2e505a5b791c818576098230ce053bea4f06c3ef2bbd325fc89de2acc0355e6f","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000400000000000040200000000000000000000000000000000000000000000000000000000000000000000000000000000000000800020002000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000020000000000000000000000000000000000001000000000000400000000000000000
root
status               1 (success)
transactionHash      0x2e505a5b791c818576098230ce053bea4f06c3ef2bbd325fc89de2acc0355e6f
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
🔍 检查NFT是否已上架...
  上架信息: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
20000000000000000000 [2e19]
true
🔍 User2当前nonce...
  User2当前nonce: 0
{"v":27,"r":"0xce8830dd0c4068b9a9561b755e84a4ccc081986505846466e1fd651c4782ab6d","s":"0x4cc29c007248acc3ce6b71595159e48bda6db298895228cae06f771cad616da4"}

🔐 User2执行permitPrePay...

blockHash            0xc5779ee42e8502abc84c8a8972eb708179d383fd30ffdf09a0f962780f81cd8b
blockNumber          10
contractAddress
cumulativeGasUsed    88047
effectiveGasPrice    317492700
from                 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
gasUsed              88047
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xc5779ee42e8502abc84c8a8972eb708179d383fd30ffdf09a0f962780f81cd8b","blockNumber":"0xa","blockTimestamp":"0x688c5d93","transactionHash":"0xfeff08a46f276d92066574372076e3a2ff43644bdc8b3872da7332259cbdb91a","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000400000000000000000000000300000000000000000000000000000000000000000000000000000000000000000400000000040000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000020000000000200000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000
root
status               1 (success)
transactionHash      0xfeff08a46f276d92066574372076e3a2ff43644bdc8b3872da7332259cbdb91a
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
🔍 生成User2的merkle proof...
  Merkle proof JSON: {
  "root": "0x60085ee8ef3bdf8eeb89dd1f19d483471d03c887f95792ddb5abaf009d08b04f",
  "proof": [
    "0x3f68e79174daf15b50e15833babc8eb7743e730bb9606f922c48e95314c3905c",
    "0x9c08ec97edd8461386aed27d6a991ad38187f897eb120ada0a4c6dc90df6e259"
  ]
}
  Merkle proof array: [0x3f68e79174daf15b50e15833babc8eb7743e730bb9606f922c48e95314c3905c,0x9c08ec97edd8461386aed27d6a991ad38187f897eb120ada0a4c6dc90df6e259]
🎁 User2执行claimNFT...

blockHash            0x19a1f4d432efa7d6774dad664755226ca329a77e93bf46d8dc6a175df21ce07a
blockNumber          11
contractAddress
cumulativeGasUsed    87810
effectiveGasPrice    278039065
from                 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
gasUsed              87810
logs                 [{"address":"0xe7f1725e7734ce288f8367e1bb143e90bb3f0512","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x0000000000000000000000000000000000000000000000000000000000000000"],"data":"0x","blockHash":"0x19a1f4d432efa7d6774dad664755226ca329a77e93bf46d8dc6a175df21ce07a","blockNumber":"0xb","blockTimestamp":"0x688c5d96","transactionHash":"0xeb13e264a714953823a964fe0ebefcc6729137b1bdb4d01c1c487aa16ce331f8","transactionIndex":"0x0","logIndex":"0x0","removed":false},{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0x19a1f4d432efa7d6774dad664755226ca329a77e93bf46d8dc6a175df21ce07a","blockNumber":"0xb","blockTimestamp":"0x688c5d96","transactionHash":"0xeb13e264a714953823a964fe0ebefcc6729137b1bdb4d01c1c487aa16ce331f8","transactionIndex":"0x0","logIndex":"0x1","removed":false},{"address":"0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0","topics":["0x8562eb94748e30bb0071e932744ce902b460c683474fcb3bfd567ffa16b1afb2","0x0000000000000000000000000000000000000000000000000000000000000000","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0x19a1f4d432efa7d6774dad664755226ca329a77e93bf46d8dc6a175df21ce07a","blockNumber":"0xb","blockTimestamp":"0x688c5d96","transactionHash":"0xeb13e264a714953823a964fe0ebefcc6729137b1bdb4d01c1c487aa16ce331f8","transactionIndex":"0x0","logIndex":"0x2","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000010000000000050200000000000100000000000000000000000000008000000000000000000000000000000000000000000000840020000000000100000000800000800000000000000000010000000000000000000000000000000000000000000000000000000000000000200000000000000000000200000000000000000000000000000000000000000000000000000000042000000000000000000001000000000000000010000000000000020000000000000000000000000000000000001000000000000c00000000000000000
root
status               1 (success)
transactionHash      0xeb13e264a714953823a964fe0ebefcc6729137b1bdb4d01c1c487aa16ce331f8
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
🔍 检查permitBuy是否成功...
  上架信息: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
20000000000000000000 [2e19]
false (应该是 false)
  NFT tokenid 1 的owner应该是 User2: 0x3c44cdddb6a900fa2b585dd299e03d12fa4293bc
  实际owner: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
[32m✅ permitBuy成功, User2已成为NFT的owner[0m
🔍 测试Multicall...
✅ NFTMarket合约支持Multicall功能
✅ Multicall合约部署成功

blockHash            0xacffb7695e1f00a94c4f755257bf6ed4d02ef30506e75f752c05a733154d7a92
blockNumber          12
contractAddress
cumulativeGasUsed    49080
effectiveGasPrice    243487638
from                 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
gasUsed              49080
logs                 [{"address":"0xe7f1725e7734ce288f8367e1bb143e90bb3f0512","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0","0x0000000000000000000000000000000000000000000000000000000000000001"],"data":"0x","blockHash":"0xacffb7695e1f00a94c4f755257bf6ed4d02ef30506e75f752c05a733154d7a92","blockNumber":"0xc","blockTimestamp":"0x688c5d96","transactionHash":"0x701c8497213ed1581d7a992e737177d6dc043922d66ef19f5e01610828dee71d","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000010400000000000000000000000240000000000000000000000000000000000000000000000040000000000000000400000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000040000010000000000000000000000000000001000000000000800000000000000000
root
status               1 (success)
transactionHash      0x701c8497213ed1581d7a992e737177d6dc043922d66ef19f5e01610828dee71d
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
✅ User1 approve the second nft to the market

blockHash            0x07b48cd4b0564d52ee5374f3ef4b97247c90b07156bd736dd5eed7654bdd341e
blockNumber          13
contractAddress
cumulativeGasUsed    101238
effectiveGasPrice    213151270
from                 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
gasUsed              101238
logs                 [{"address":"0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0","topics":["0x5f9c03de076f5063cd3ebcfe8ef7aa8af378e4b35a83c77ba9777e97083879a2","0x0000000000000000000000000000000000000000000000000000000000000001","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x000000000000000000000000000000000000000000000001158e460913d00000","blockHash":"0x07b48cd4b0564d52ee5374f3ef4b97247c90b07156bd736dd5eed7654bdd341e","blockNumber":"0xd","blockTimestamp":"0x688c5d96","transactionHash":"0x643b04d5838a360d10603f66e755252c0b1e14c23ed0742a8b7efe533283142a","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000400000000000040200000000000040000000000000000000000000000000000000000000000040000000000000000000000000800000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000040000000000000000000000000000000000001000000000000400000000000000000
root
status               1 (success)
transactionHash      0x643b04d5838a360d10603f66e755252c0b1e14c23ed0742a8b7efe533283142a
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
✅ User1 listed the second nft at 20 ether

blockHash            0xccac4bd436f86c34d77043de514f88d3d21b107af838e16fe4d8db17af8f7321
blockNumber          14
contractAddress
cumulativeGasUsed    52126
effectiveGasPrice    186687187
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              52126
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xccac4bd436f86c34d77043de514f88d3d21b107af838e16fe4d8db17af8f7321","blockNumber":"0xe","blockTimestamp":"0x688c5d96","transactionHash":"0x5c5a46c85569096ca8643cc59c18a0ebcf99626d9ad429ba5597888da670706a","transactionIndex":"0x0","logIndex":"0x0","removed":false}]
logsBloom            0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000008000000000000000000000000000000000000000000000040000000000000000100000000000800000000000000000010000000000000000000000000000000000000000000000000000000000000000200000000000000000000200000000000000000000000000000000000000000000000000000000042000000200000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
root
status               1 (success)
transactionHash      0x5c5a46c85569096ca8643cc59c18a0ebcf99626d9ad429ba5597888da670706a
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x5FbDB2315678afecb367f032d93F642f64180aa3
✅ Admin给User2转账10 ether
🔍 User2当前nonce...
  User2当前nonce: 1
{"v":28,"r":"0x57bad5a03aa008ca10e9d288c3fedecb5a7a189d39afdc3069c61722e52a9350","s":"0x2143362173426cca47ff82b244805ed0758f026013c9bc58f1aaec305fbf5075"}

🔐 User2执行Multicall 做permitPrePay 和 claimNFT...

blockHash            0xb42fe3cf4e7da965b366e9360a35838215ac68d8f9db809aec21ca1a32eb4c06
blockNumber          15
contractAddress
cumulativeGasUsed    111741
effectiveGasPrice    163432383
from                 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
gasUsed              111741
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xb42fe3cf4e7da965b366e9360a35838215ac68d8f9db809aec21ca1a32eb4c06","blockNumber":"0xf","blockTimestamp":"0x688c5d99","transactionHash":"0x728c8de6ffcfa89e655f04ece93824d6e9de7edac8def9d242a1ae37edc4f519","transactionIndex":"0x0","logIndex":"0x0","removed":false},{"address":"0xe7f1725e7734ce288f8367e1bb143e90bb3f0512","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x0000000000000000000000000000000000000000000000000000000000000001"],"data":"0x","blockHash":"0xb42fe3cf4e7da965b366e9360a35838215ac68d8f9db809aec21ca1a32eb4c06","blockNumber":"0xf","blockTimestamp":"0x688c5d99","transactionHash":"0x728c8de6ffcfa89e655f04ece93824d6e9de7edac8def9d242a1ae37edc4f519","transactionIndex":"0x0","logIndex":"0x1","removed":false},{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xb42fe3cf4e7da965b366e9360a35838215ac68d8f9db809aec21ca1a32eb4c06","blockNumber":"0xf","blockTimestamp":"0x688c5d99","transactionHash":"0x728c8de6ffcfa89e655f04ece93824d6e9de7edac8def9d242a1ae37edc4f519","transactionIndex":"0x0","logIndex":"0x2","removed":false},{"address":"0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0","topics":["0x8562eb94748e30bb0071e932744ce902b460c683474fcb3bfd567ffa16b1afb2","0x0000000000000000000000000000000000000000000000000000000000000001","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"],"data":"0x0000000000000000000000000000000000000000000000008ac7230489e80000","blockHash":"0xb42fe3cf4e7da965b366e9360a35838215ac68d8f9db809aec21ca1a32eb4c06","blockNumber":"0xf","blockTimestamp":"0x688c5d99","transactionHash":"0x728c8de6ffcfa89e655f04ece93824d6e9de7edac8def9d242a1ae37edc4f519","transactionIndex":"0x0","logIndex":"0x3","removed":false}]
logsBloom            0x00000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000010400000000050200000000000340000000000000000000000000008000000000000000000040000000000000000400000000840000000000000100000000000000800000000000000000010000000000000000000000000000000000000000000000000000000000000000200000000020000000000200000000000000000000000000000000000000000000000000000000042000000000000000000001000000000000000010000000000000040000010000000000000000000000000000001000000000000c00000000000000000
root
status               1 (success)
transactionHash      0x728c8de6ffcfa89e655f04ece93824d6e9de7edac8def9d242a1ae37edc4f519
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
